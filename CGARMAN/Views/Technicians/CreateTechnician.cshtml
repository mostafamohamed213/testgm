@model CGARMAN.ViewModel.TechnicianViewModels.CreateTechnicianViewModel

@{
    Layout = "_Authenticated";
    ViewData["Title"] = "Create Technican";
}

<link href='~/make-dropdown-with-search-box/select2/dist/css/select2.min.css' rel='stylesheet' type='text/css'>


<div class="d-sm-flex align-items-center justify-content-between mb-4" style="margin-left:10px">
    <h1 class="h3 mb-0 text-gray-800">
        Technician <i style="font-size:large" class="fa fa-arrow-right" aria-hidden="true"></i> Create New
    </h1>
    <a style="margin-right:10px" asp-action="Index" asp-controller="Home" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm">Back to Home</a>
</div>
<hr />
<div class="row" style="margin:1%">
    <div class="col-lg-12">
        <form asp-action="Create" asp-controller="Technicians"  method="post" enctype="multipart/form-data">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            @*<div class="form-group row">
                <div class="col-xl-12">
                    <div class="row">
                        <div class="col-xl-1" style=" padding-top: 5px;">
                            <label>Name</label>
                        </div>
                        <div class="col-xl-3">
                            <input type="text" asp-for="Name" class="form-control form-control-user" />
                            <span asp-validation-for="Name" style="margin:auto" class="text-danger"></span>

                        </div>
                        <div class="col-xl-6">
                        </div>
                    </div>
                </div>
            </div>*@
            @*<hr class="sidebar-divider bg-gradient-primary">*@

            <div class="row">
                <div class="col-lg-6 mb-4">

                    <div class="row" style=" margin: 1%;">
                        <div class="col-xl-3">  <label>Name</label></div>
                        <div class="col-xl-9 row">
                            <div class="col-xl-11 col-sm-11 col-md-11 col-lg-11">
                                <input type="text" asp-for="Name" class="form-control form-control-user" />

                            </div>
                            <div class="col-xl-1 col-sm-1 col-md-1 col-lg-1" style=" direction: rtl; ">
                                @*<span id="popupInvItemTypeBrand"></span>*@
                            </div>
                            <span asp-validation-for="Name" style="margin: 0% 10%" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="row" style=" margin: 1%;">
                        <div class="col-xl-3">  <label>Position</label></div>
                        <div class="col-xl-9 row">
                            <div class="col-xl-11 col-sm-11 col-md-11 col-lg-11">
                                <select asp-for="TechnicianPositionId" required asp-items="@ViewBag.TechnicianPositions" style="width :100%" class="form-control form-control-user">
                                    <option value="-1">Please select one</option>
                                </select>
                            </div>
                            <div class="col-xl-1 col-sm-1 col-md-1 col-lg-1" style=" direction: rtl; ">
                                @*<span id="popupInvItemTypeBrand"></span>*@
                            </div>
                            <span asp-validation-for="TechnicianPositionId" style="margin: 0% 10%" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="row" style=" margin: 1%;">
                        <div class="col-xl-3">  <label>Contact #1</label></div>
                        <div class="col-xl-9 row">
                            <div class="col-xl-11 col-sm-11 col-md-11 col-lg-11">
                                <input type="text" asp-for="Contact1" class="form-control form-control-user" />
                            </div>
                            <div class="col-xl-1 col-sm-1 col-md-1 col-lg-1" style=" direction: rtl; ">
                                @*<span id="popupInvItemTypeBrandModel"></span>*@
                            </div>
                            <span asp-validation-for="Contact1" style="margin: 0% 10%" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="row" style=" margin: 1%;">
                        <div class="col-xl-3">  <label>Contact #2</label></div>
                        <div class="col-xl-9 row">
                            <div class="col-xl-11 col-sm-11 col-md-11 col-lg-11">
                                <input type="text" asp-for="Contact2" class="form-control form-control-user" />
                            </div>
                            <div class="col-xl-1 col-sm-1 col-md-1 col-lg-1" style=" direction: rtl; ">
                                @*<span id="popupInvItemTypeBrandModel"></span>*@
                            </div>
                            <span asp-validation-for="Contact2" style="margin: 0% 10%" class="text-danger"></span>
                        </div>
                    </div>


                    <div class="row" style="margin: 1%;">
                        <div class="col-xl-3">  <label>Company</label></div>
                        <div class="col-xl-9 row">
                            <div class="col-xl-11 col-sm-11 col-md-11 col-lg-11">
                                <select asp-for="TechnicianCompanyId" asp-items="ViewBag.TechnicianCompanies" required style="width :100%" class="form-control form-control-user">
                                    <option value="-1">Please select one</option>
                                </select>
                            </div>
                            <div class="col-xl-1 col-sm-1 col-md-1 col-lg-1">
                                @*<span id="popupInvItemTypeClassification"></span>*@
                            </div>
                            <span asp-validation-for="TechnicianCompanyId" style="margin: 0% 10%" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="row" style="margin: 1%;">
                        <div class="col-xl-4">  <label>Company Employee ID</label></div>
                        <div class="col-xl-8 row">
                            <div class="col-xl-11 col-sm-11 col-md-11 col-lg-11">
                                <input type="text" asp-for="TechnicianCompanyEmployeeId" class="form-control form-control-user" />
                            </div>
                            <div class="col-xl-1 col-sm-1 col-md-1 col-lg-1" style=" direction: rtl; ">
                                @*<span id="popupInvItemTypeClassification"></span>*@
                            </div>
                            <span asp-validation-for="TechnicianCompanyEmployeeId" style="margin: 0% 10%" class="text-danger"></span>
                        </div>
                    </div>



                </div>

                <div class="col-lg-6 mb-4">


                    <div class="row" style=" margin: 1%;">
                        <div class="col-xl-4">  <label>National ID</label></div>
                        <div class="col-xl-8 row">
                            <div class="col-xl-11 col-sm-11 col-md-11 col-lg-11">
                                <input class="form-control form-control-user" required style="width :100%" asp-for="NationalId" />
                            </div>
                            <div class="col-xl-1 col-sm-1 col-md-1 col-lg-1" style=" direction: rtl; ">

                            </div>
                            <span asp-validation-for="NationalId" style="margin: 0% 10%" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="row" style=" margin: 1%;">
                        <div class="col-xl-4">  <label>Cost Center</label></div>
                        <div class="col-xl-8 row">
                            <div class="col-xl-11 col-sm-11 col-md-11 col-lg-11">
                                <select asp-for="CostCenterId" required asp-items="@ViewBag.CostCenters" style="width :100%" class="form-control form-control-user">
                                    <option value="-1">Please select one</option>
                                </select>
                            </div>
                            <div class="col-xl-1 col-sm-1 col-md-1 col-lg-1" style=" direction: rtl; ">
                                <span id="popupInvItemTypeCostCenter"></span>
                            </div>
                            <span asp-validation-for="CostCenterId" style="margin: 0% 10%" class="text-danger"></span>
                        </div>
                    </div>


                    <div class="row" style=" margin: 1%;">
                        <div class="col-xl-4">  <label>Birth Date</label></div>
                        <div class="col-xl-8 row">
                            <div class="col-xl-11 col-sm-11 col-md-11 col-lg-11">
                                <input type="date" asp-for="BirthDate" class="form-control form-control-user" />
                            </div>
                            <div class="col-xl-1 col-sm-1 col-md-1 col-lg-1" style=" direction: rtl; ">

                            </div>
                            <span asp-validation-for="BirthDate" style="margin: 0% 10%" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="row" style=" margin: 1%;">
                        <div class="col-xl-4">  <label>Start Date</label></div>
                        <div class="col-xl-8 row">
                            <div class="col-xl-11 col-sm-11 col-md-11 col-lg-11">
                                <input type="date" asp-for="StartDate" class="form-control form-control-user" />
                            </div>
                            <div class="col-xl-1 col-sm-1 col-md-1 col-lg-1" style=" direction: rtl; ">

                            </div>
                            <span asp-validation-for="StartDate" style="margin: 0% 10%" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="row" style=" margin: 1%;">
                        <div class="col-xl-4">  <label>End Date</label></div>
                        <div class="col-xl-8 row">
                            <div class="col-xl-11 col-sm-11 col-md-11 col-lg-11">
                                <input type="date" asp-for="EndDate" class="form-control form-control-user" />
                            </div>
                            <div class="col-xl-1 col-sm-1 col-md-1 col-lg-1" style=" direction: rtl; ">

                            </div>
                            <span asp-validation-for="EndDate" style="margin: 0% 10%" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="row" style=" margin: 1%;">
                        <div class="col-xl-4">  <label>Image</label></div>
                        <div class="col-xl-8 row">
                            <div class="col-xl-4 col-sm-4 col-md-4 col-lg-4">
                                <input type='file' name="ItemImage" asp-for="Image" accept="image/*" style="padding: 10px;" id="inputImage" onchange="readURL(this);" />
                                <div style="max-height: 70px; min-height: 70px; height:70px">
                                    <img id="blah" style="max-width: 180px; display: none; max-height: 69px; min-height: 69px; height: 69px " alt="Item image" />
                                </div>
                            </div>
                            <div class="col-xl-8 col-sm-8 col-md-8 col-lg-8">
                                @*<img id="blah" style="max-width: 180px;  display: none" alt="Item image" />*@
                                <input type="hidden" asp-for="ImagePath" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <input type="submit" value="Create" style=" width: 150px; margin: 30px 40px;" class="btn btn-primary" />
            </div>
        </form>
    </div>
</div>

@section Scripts{
    <script src='~/make-dropdown-with-search-box/select2/dist/js/select2.min.js' type='text/javascript'></script>

    <script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#blah')
                    .attr('src', e.target.result);
            };

            reader.readAsDataURL(input.files[0]);
        }
        document.getElementById("blah").style.display = "block";
    }

        document.getElementById("btncontainerTechnicians").click();
        ToggleColorInDashboard("linkCreateTechnicians");
        document.getElementById("btnGoToTopPage").click();

        function getPopupAddModelByBrandId() {
            var brand = $("#selBrandinvItemtype").val();

            if (brand !== undefined && brand != 'null' && brand > 0) {

                $.ajax({
                    type: "Get",
                    url: "/InventoryItemType/GetPopupAddModelByBrandId",
                    data: { "warehouseId": $("#WarehouseIdityp").val(), "brandId": $("#selBrandinvItemtype").val(), "brandName": $("#selBrandinvItemtype option:selected").text() },
                    success: function (response) {

                        $("#popupInvItemTypeBrandModel").empty();
                        $('#popupInvItemTypeBrandModel').append(response);
                    },
                    failure: function (response) {
                        throwException(response)
                    },
                    error: function (response) {
                        throwException(response)
                    }
                });
            } else {

            }

        }

        function getModelsBybrandid(id) {

            $.ajax({
                type: "Get",
                url: "/InventoryItemType/getModelsBybrandid",
                data: { "id": id },
                success: function (response) {

                    if (response != 0 && response != 'null') {

                        $("#invITypeModel").empty();
                        //var option = document.createElement("option");
                        //option.text = "-Select-";
                        //$('#invITypeModel').append(option);
                        response.forEach(function (i) {
                            var option = document.createElement("option");
                            option.text = i.text;
                            option.value = i.value;
                            $('#invITypeModel').append(option);
                        });


                    } else {
                        $("#invITypeModel").empty();
                        //    $('#invITypeModel').append('<option> Please select one</option>');
                    }
                },
                failure: function (response) {
                    throwException(response)
                },
                error: function (response) {
                    throwException(response)
                }
            });
            getPopupAddModelByBrandId();
        }
        function GetClassificationsCostCenterAndUnitss(v) {

            if (v != null && v != "" && v > 0) {

                @* $("#addInventoryItemTypeClassificationId").empty();
                //$("#addInventoryItemTypeClassificationId").append('<partial name="~/Views/Shared/_PopupAddClassification.cshtml" model = "' + v + '" />');
                $("#addInventoryItemTypeClassificationId").append('@Html.PartialAsync("_PopupAddClassification")' + v + "");*@

                $.ajax({
                    type: "Get",
                    url: "/InventoryItemType/GetClassifications",
                    data: { "warehouseId": $("#WarehouseIdityp").val() },
                    success: function (response) {
                        if (response.classifications != 'null') {
                            $("#InventoryItemTypeClassificationIdss").empty();
                            response.classifications.forEach(function (i) {
                                var option = document.createElement("option");
                                option.text = i.text;
                                option.value = i.value;
                                $('#InventoryItemTypeClassificationIdss').append(option);
                            });


                        } else {

                            $("#InventoryItemTypeClassificationIdss").empty();
                            $('#InventoryItemTypeClassificationIdss').append('<select asp-for="InventoryItemTypeClassificationId" id="InventoryItemTypeClassificationIdss"  class="form-control form-control-user"><option> Please select one</option></select>');
                        }


                        //if (response.costCenters != 'null') {
                        //    $("#CostCenterIdss").empty();
                        //    var option = document.createElement("option");
                        //    option.text = "-Select-";
                        //    $('#CostCenterIdss').append(option);
                        //    response.costCenters.forEach(function (i) {
                        //        var option = document.createElement("option");
                        //        option.text = i.text;
                        //        option.value = i.value;
                        //        $('#CostCenterIdss').append(option);
                        //    });
                        //} else {

                        //    $("#CostCenterIdss").empty();
                        //    $('#CostCenterIdss').append('<select class="form-control form-control-user" asp-for="CostCenterId" id="CostCenterIdss"><option> Please select one</option></select>');
                        //}

                        //if (response.units != 'null') {
                        //    $("#InventoryItemTypeUnitIdss").empty();
                        //    var option = document.createElement("option");
                        //    option.text = "-Select-";
                        //    $('#InventoryItemTypeUnitIdss').append(option);
                        //    response.units.forEach(function (i) {
                        //        var option = document.createElement("option");
                        //        option.text = i.text;
                        //        option.value = i.value;
                        //        $('#InventoryItemTypeUnitIdss').append(option);
                        //    });
                        //} else {

                        //    $("#InventoryItemTypeUnitIdss").empty();
                        //    $('#InventoryItemTypeUnitIdss').append('<select asp-for="InventoryItemTypeUnitId" id="InventoryItemTypeUnitIdss" class="form-control form-control-user"><option>Please select one</option></select>');
                        //}


                    },
                    failure: function (response) {
                        throwException(response)
                    },
                    error: function (response) {
                        throwException(response)
                    }
                });
                GetPopupAddclassification();
                //GetPopupAddBrand();
                //GetPopupAddUnits();
                //GetPopupAddCostCenter();
                //togglePopups("block");
                document.getElementById("popupInvItemTypeClassification").style.display = "block";
            } else {
                /* togglePopups("none");*/
                document.getElementById("popupInvItemTypeClassification").style.display = "none";
                $("#InventoryItemTypeClassificationIdss").empty();
                var option = document.createElement("option");
                option.text = "Please select one";
                $('#InventoryItemTypeClassificationIdss').append(option);
            }

        }
        function GetPopupAddclassification() {
            $.ajax({
                type: "Get",
                url: "/InventoryItemType/GetPopupClassificationNotContainWarehouseId",
                data: { "warehouseId": $("#WarehouseIdityp").val() },
                success: function (response) {

                    $("#popupInvItemTypeClassification").empty();
                    $('#popupInvItemTypeClassification').append(response);
                },
                failure: function (response) {
                    throwException(response)
                },
                error: function (response) {
                    throwException(response)
                }
            });
        }

        function GetPopupAddBrand() {
            $.ajax({
                type: "Get",
                url: "/InventoryItemType/GetPopupAddBrand",
                data: { "warehouseId": $("#WarehouseIdityp").val() },
                success: function (response) {

                    $("#popupInvItemTypeBrand").empty();
                    $('#popupInvItemTypeBrand').append(response);
                },
                failure: function (response) {
                    throwException(response)
                },
                error: function (response) {
                    throwException(response)
                }
            });
        }

        function GetPopupAddUnits() {
            $.ajax({
                type: "Get",
                url: "/InventoryItemType/GetPopupAddUnits",
                data: { "warehouseId": $("#WarehouseIdityp").val() },
                success: function (response) {

                    $("#popupInvItemTypeUnit").empty();
                    $('#popupInvItemTypeUnit').append(response);
                },
                failure: function (response) {
                    throwException(response)
                },
                error: function (response) {
                    throwException(response)
                }
            });
        }
        function GetPopupAddCostCenter() {
            $.ajax({
                type: "Get",
                url: "/InventoryItemType/GetPopupAddCostCenter",
                data: { "warehouseId": $("#WarehouseIdityp").val() },
                success: function (response) {

                    $("#popupInvItemTypeCostCenter").empty();
                    $('#popupInvItemTypeCostCenter').append(response);
                },
                failure: function (response) {
                    throwException(response)
                },
                error: function (response) {
                    throwException(response)
                }
            });
        }
        function togglePopups(v) {

            document.getElementById("popupInvItemTypeBrand").style.display = v;
            document.getElementById("popupInvItemTypeBrandModel").style.display = v;
            document.getElementById("popupInvItemTypeUnit").style.display = v;
            document.getElementById("popupInvItemTypeCostCenter").style.display = v;
        }
       
        $("#TechnicianPositionId").select2();
        $("#TechnicianCompanyId").select2();
        $("#CostCenterId").select2();
  

   
    </script>
}

